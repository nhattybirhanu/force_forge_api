<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Task Editor</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-justify-content-center">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Task Editor</ion-title>
    </ion-toolbar>
  </ion-header>

  <div id="container" form>

    <ion-item>
      <ion-input   label-placement="floating" fill="outline" [formControl]="titleFormContol" #title>
        <div slot="label">Email <ion-text *ngIf="!titleFormContol.valid" color="danger">*</ion-text></div>
      </ion-input>

    </ion-item>

    <ion-item>
      <ion-textarea label="Description" labelPlacement="floating" #description placeholder="Enter text"></ion-textarea>
    </ion-item>

    <ion-item>

      <ion-select label="Repetition" value="Weekly" (ionChange)="selectRepetition($event)">
        <ion-select-option *ngFor="let rep of repetitions" [value]="rep" >{{rep}}</ion-select-option>
      </ion-select>
    </ion-item>
<!--    <ion-item>-->
<!--      <ion-grid>-->
<!--        <ion-row class="ion-justify-content-around">-->
<!--          <ion-col size="6" >-->
<!--            <ion-item>-->
<!--              <ion-label>Icon</ion-label>-->

<!--              <ion-icon name="duplicate-outline"></ion-icon>-->
<!--            </ion-item>-->
<!--          </ion-col>-->
<!--          <ion-col size="6">-->

<!--            <ion-item>-->
<!--              <ion-icon name="color-fill-outline"></ion-icon>-->
<!--              <ion-label>Color</ion-label>-->

<!--            </ion-item>-->

<!--          </ion-col>-->
<!--        </ion-row>-->
<!--      </ion-grid>-->
<!--    </ion-item>-->
<ion-item>
  <ion-label >Set Alarm</ion-label>
   <ion-icon slot="start" [name]="notificationAlarm.checked?'notifications-outline':'notifications-off-outline'"></ion-icon>
  <ion-toggle #notificationAlarm checked="true" slot="end"></ion-toggle>
</ion-item>
    <ion-item>
      <ion-label slot="start" >Start date  <ion-text  color="danger" *ngIf="!startDate">*</ion-text></ion-label>

      <ion-datetime-button slot="end"   datetime="datetime" ></ion-datetime-button>

      <ion-modal [keepContentsMounted]="true">
        <ng-template>
          <ion-datetime [value]="startDate"  [showDefaultButtons]="true" presentation="date" (ionChange)="onChangeStartedDate($event)" [min]="getNow()" id="datetime"></ion-datetime>

        </ng-template>
      </ion-modal>
    </ion-item>
<!--    <ion-item>-->
<!--      <ion-label slot="start">Duration</ion-label>-->

<!--    </ion-item>-->
<!--    <ion-item>-->

<!--      <ion-segment [scrollable]="true" >-->
<!--        <ion-segment-button *ngFor="let duration of durationsInMin" [value]="duration" (click)="updateDuration(duration)">-->
<!--          <ion-label>{{duration.name           }}</ion-label>-->
<!--        </ion-segment-button>-->

<!--      </ion-segment>-->
<!--    </ion-item>-->

    <ion-item>
      <ion-label>Start at <ion-text  color="danger" *ngIf="!startIonicTime">*</ion-text> </ion-label>
      <ion-datetime-button datetime="startTime">


      </ion-datetime-button>
      <ion-modal [keepContentsMounted]="true">
        <ng-template>
          <ion-datetime  [showDefaultButtons]="true" presentation="time" (ionChange)="updateTime()" #startTime id="startTime"></ion-datetime>
        </ng-template>
      </ion-modal>
    </ion-item>
    <ion-item>
      <ion-label>End at </ion-label>
      <ion-datetime-button datetime="endTime"></ion-datetime-button>
      <ion-modal [keepContentsMounted]="true">
        <ng-template>
          <ion-datetime  [showDefaultButtons]="true"  presentation="time"  #endTime id="endTime"></ion-datetime>
        </ng-template>
      </ion-modal>
    </ion-item>

<!--    <ion-picker>-->
<!--      <ion-picker-column value="javascript">-->
<!--        <ion-picker-column-option value="" disabled="true">&#45;&#45;</ion-picker-column-option>-->
<!--        <ion-picker-column-option value="javascript">Javascript</ion-picker-column-option>-->
<!--        <ion-picker-column-option value="typescript">Typescript</ion-picker-column-option>-->
<!--        <ion-picker-column-option value="rust">Rust</ion-picker-column-option>-->
<!--        <ion-picker-column-option value="c#">C#</ion-picker-column-option>-->
<!--      </ion-picker-column>-->
<!--    </ion-picker>-->
<!--    <ion-item></ion-item>-->
<!--    <div class="date_picker_container">-->
<!--      <ion-datetime  presentation="time"></ion-datetime>-->

<!--    </div>-->
    <ion-item>
      <ion-label>Repeat <ion-text *ngIf="!isRepeatDaysChose()"  color="danger">*</ion-text></ion-label>
    </ion-item>

<!--    [class.selected_segment]="d.selected===1" [class.unselected_segment]="d.selected===0"-->
<!---->
    <ion-segment #ionSegment [scrollable]="true" value="1" >

      <ion-segment-button (click)="updateRepeat(d);" [class.selected_segment]="d.selected===1" *ngFor="let d of days"
      [value]="d.id"
      >
        <ion-label >{{d.name}}</ion-label>
      </ion-segment-button>

    </ion-segment>


    <ion-item>
      <ion-select toggle-icon="" [value]="selectedCategory?.id" (ionChange)="setSelectedCat($event.detail.value)" >
        <div slot="label">Category <ion-text *ngIf="!selectedCategory" color="danger">*</ion-text></div>
        <ion-select-option  *ngFor="let cat of categories" [value]="cat.id" >{{cat.title}}</ion-select-option>
      <ion-select-option  (select)="openCategoryEditor(undefined,undefined)" >


      </ion-select-option>
      </ion-select>
      <ion-icon slot="end" size="small" id="cat-option-trigger" name="ellipsis-vertical"></ion-icon>

    </ion-item>

    <ion-popover trigger="cat-option-trigger" triggerAction="click">
      <ng-template>
        <ion-content class="ion-padding">

          <ion-list>
            <ion-item (click)="openCategoryEditor(undefined,undefined)">
              <ion-label slot="start">Add</ion-label>
              <ion-icon slot="end"   name="add-outline"></ion-icon>

            </ion-item>
            <ion-item *ngIf="selectedCategory&&selectedCategory.userCategory" (click)="openCategoryEditor(selectedCategory.title,selectedCategory.id)">
              <ion-label slot="start">Edit</ion-label>

              <ion-icon slot="end" size="small"   name="pencil-outline"></ion-icon>

            </ion-item>
          </ion-list>
        </ion-content>

      </ng-template>
    </ion-popover>
    <ion-item>
      <ion-select toggle-icon="" label="Priority" [value]="selectedPriority"  (ionChange)="onSelectedPriority($event)">
        <ion-select-option  *ngFor="let priority of priorities" [value]="priority">{{priority}}
        </ion-select-option>

      </ion-select>
    </ion-item>
    <ion-item (click)="openTagEditor(undefined,undefined)">
      <ion-label>Tag</ion-label>
      <ion-icon slot="end" name="add-outline"></ion-icon>

    </ion-item>
    <div class="tag_container">
      <ion-chip *ngFor="let tag of tags" [class.selectedTag]="isSelectedTag(tag!!)" (click)="addOrRemoveTag(tag!!)">
        <ion-label>#{{tag.title}}</ion-label>
        <ion-icon size="small" *ngIf="tag.userTag" (click)="openTagEditor(tag.title,tag.id)"  name="pencil-outline"></ion-icon>

      </ion-chip>

    </div>
<!--    <ion-card>-->
<!--      <ion-card-header>-->
<!--        <ion-card-title>-->
<!--          Sub task-->
<!--        </ion-card-title>-->
<!--      </ion-card-header>-->


<!--      <ion-card-content>-->

<!--      </ion-card-content>-->


<!--    </ion-card>-->
    <ion-list [inset]="">
      <ion-list-header>
        <ion-label>SubTask</ion-label>

      </ion-list-header>
        <ion-item lines="none" *ngFor="let subtask of subtasks let i=index">
          <ion-input [value]="subtask.description" slot="start" (ionChange)="removeSubTaskAuto($event.detail.value,i)">
          </ion-input>
          <ion-icon slot="end" name="close-outline" (click)="removeTask(subtask.description,subtask.id)"></ion-icon>

        </ion-item>
        <ion-item lines="none">
          <ion-input #subtaskInput slot="start" placeholder="add subtask"></ion-input>
          <ion-button  slot="end" (click)="addSubTask(subtaskInput.value)" [disabled]="!subtaskInput.value">
            <ion-icon slot="icon-only" name="add-outline">

            </ion-icon>
          </ion-button>
        </ion-item>


    </ion-list>


  </div>
  <ion-grid>
    <ion-row class="ion-justify-content-around">

      <ion-col size="3" >
        <ion-button  class="actionButton" size="default" fill="outline" (click)="submitTaskForm()" >Save
          <ion-icon size="small" slot="end" name="bookmark-outline"></ion-icon>
        </ion-button>

      </ion-col>
      <ion-col size="3">
        <ion-button  class="actionButton" fill="outline" (click)="deleteTask()" color="danger">Delete
          <ion-icon size="small" slot="end" color="dark" name="trash-outline"></ion-icon>

        </ion-button>

      </ion-col>
    </ion-row>
  </ion-grid>


</ion-content>
<ion-footer>
</ion-footer>
